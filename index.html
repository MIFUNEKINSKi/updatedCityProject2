<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" href="images/Olympics-logo-favicon.jpeg" />
    <link rel="stylesheet" href="./dist/main.css" />
    <link
        href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;700&family=Montserrat:wght@400;500;600;700&family=Varela+Round&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="./dist/main.js"></script> 
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <title>City Livability</title>
</head>
<!-- nav  -->
<body>
    <div class="nav">
        <div id="icons-container">
            <i class="fa fa-info-circle" id="about-button"></i>
            <a href="https://www.linkedin.com/chris-moore-27438989/" target="_blank">
                <i class="fa fa-linkedin"></i></a>
            <a href="https://github.com/MIFUNEKINSKi/CityDataJSProject/tree/master" target="_blank">
                <i class="fa fa-github-square"></i>
            </a>
        </div>
    </div>

  
    <button onclick="myFunction('new-york')" class="dropbtn">New York</button>
    <button onclick="myFunction('new-york')" class="dropbtn">New York</button>
    <button onclick="myFunction('jakarta')" class="dropbtn">Jakarta</button>
    <button onclick="myFunction('san-francisco-bay-area')" class="dropbtn">SF</button>

    
    <p id="demo">Click me.</p>
    <script>
        document.getElementById("demo").onclick = function () { myFunction() };

        function myFunction() {
            document.getElementById("demo").innerHTML = "YOU CLICKED ME!";
        }
    </script>


        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/topojson.v2.min.js"></script>



        <!-- attempt at flex container for both -->
        <div class="flex-container">
            <h1 id="header">City Livability</h1>
            <div class="map-and-data-container">
                <div class="data" id="data_section"></div>
                <div class="map">
                    <div id="hover-info"></div>
                    <svg class="worldmap"></svg>
                </div>
            </div>
        </div>

        </div> 
<!-- simple bar chart -->
<!-- <svg width=”500" height=”800" class=”bar-chart”></svg>
<script src=”https://d3js.org/d3.v5.min.js"></script>
<script src=”script.js”></script> -->


        <!-- Globe with dummy data -->

    <body> 

            <script src="https://d3js.org/d3.v4.min.js"></script>
            <script src="https://d3js.org/topojson.v1.min.js"></script>
            <script>
                const width = 960;
                const height = 500;
                const config = {
                    speed: 0.005,
                    verticalTilt: -30,
                    horizontalTilt: 0
                }
                let locations = [
             
                    {
                        "latitude": 37.77493,
                        "longitude": -122.41942
                    },
                    {
                        "latitude": 40.71427,
                        "longitude": -74.00597
                    },
                    {
                        "latitude": -6.21462,
                        "longitude": 106.84513
                    },
                   
                ];
                let svg = d3.select('svg')
                    .attr('width', width).attr('height', height);
                const markerGroup = svg.append('g');
                const projection = d3.geoOrthographic();
                const initialScale = projection.scale();
                const path = d3.geoPath().projection(projection);
                const center = [width / 2, height / 2];

                drawGlobe();
                drawGraticule();
                enableRotation();

                function drawGlobe() {
                    d3.queue()
                        .defer(d3.json, 'https://gist.githubusercontent.com/mbostock/4090846/raw/d534aba169207548a8a3d670c9c2cc719ff05c47/world-110m.json')
                        .defer(d3.json, 'locations.json')
                        .await((error, worldData, locationData) => {
                            svg.selectAll(".segment")
                                .data(topojson.feature(worldData, worldData.objects.countries).features)
                                .enter().append("path")
                                .attr("class", "segment")
                                .attr("d", path)
                                .style("stroke", "#888")
                                .style("stroke-width", "1px")
                                .style("fill", (d, i) => '#e5e5e5')
                                .style("opacity", ".6");
                            locations = locationData;
                            drawMarkers();
                        });
                }

                function drawGraticule() {
                    const graticule = d3.geoGraticule()
                        .step([10, 10]);

                    svg.append("path")
                        .datum(graticule)
                        .attr("class", "graticule")
                        .attr("d", path)
                        .style("fill", "#fff")
                        .style("stroke", "#ccc");
                }

                function enableRotation() {
                    d3.timer(function (elapsed) {
                        projection.rotate([config.speed * elapsed - 120, config.verticalTilt, config.horizontalTilt]);
                        svg.selectAll("path").attr("d", path);
                        drawMarkers();
                    });
                }

                function drawMarkers() {
                    const markers = markerGroup.selectAll('circle')
                        .data(locations);
                    markers
                        .enter()
                        .append('circle')
                        .merge(markers)
                        .attr('cx', d => projection([d.longitude, d.latitude])[0])
                        .attr('cy', d => projection([d.longitude, d.latitude])[1])
                        .attr('fill', d => {
                            const coordinate = [d.longitude, d.latitude];
                            gdistance = d3.geoDistance(coordinate, projection.invert(center));
                            return gdistance > 1.57 ? 'none' : 'steelblue';
                        })
                        .attr('r', 7);

                    markerGroup.each(function () {
                        this.parentNode.appendChild(this);
                    });
                }
            </script>
        </body>


        <!-- bar chart that isn't working when they are together -->

<!-- 
<style>
    /* set the CSS */

    .bar {
        fill: steelblue;
    }
</style> -->


<!-- <body> -->

    <!-- load the d3.js library -->
    <!-- <script src="https://d3js.org/d3.v6.min.js"></script>
    <script>

        // Set graph margins and dimensions
        var margin = { top: 20, right: 20, bottom: 30, left: 40 },
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        // Set ranges
        var x = d3.scaleBand()
            .range([0, width])
            .padding(0.1);
        var y = d3.scaleLinear()
            .range([height, 0]);
        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        // Get data
       d3.csv("amounts.csv").then(function (data) {

            // Format data
            data.forEach(function (d) {
                d.amounts = +d.amounts;
            });

            // Scale the range of the data in the domains
            x.domain(data.map(function (d) { return d.name; }));
            y.domain([0, d3.max(data, function (d) { return d.amounts; })]);

            // Append rectangles for bar chart
            svg.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function (d) { return x(d.name); })
                .attr("width", x.bandwidth())
                .attr("y", function (d) { return y(d.amounts); })
                .attr("height", function (d) { return height - y(d.amounts); });

            // Add x axis
            svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x));

            // Add y axis
            svg.append("g")
                .call(d3.axisLeft(y));

        }); -->

    </script> -->
</body>


   <!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript"> 

// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {

// Create the data table.
var data = google.visualization.arrayToDataTable([
    ['Item', 'Yes', { role: 'tooltip' } ,'No',  { role: 'tooltip' } ],
    ['Var A',   .5 , '', .5,  ''],
    ['Var B', .9, '', .1,  ''],
]);
var data2 = google.visualization.arrayToDataTable([
    ['Item', 'Yes', { role: 'tooltip' } ,'No',  { role: 'tooltip' } ],
    ['Var A',   .2 , '', .8,  ''],
    ['Var B', .8, '', .2,  ''],
]);

var options = {
    width: 250,
    height: 150,
    backgroundColor: '#FFFFF0',
    legend: { position: 'none'},
    hAxis:{ textPosition: 'none', gridlines: {color:'grey', count: 2}},
    bar: { groupWidth: '75%' },
    isStacked: true,
    colors: ['#FF6600', '#FFFFF0'],
 };

// Instantiate and draw our chart, passing in some options.
var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, options);
var chart2 = new google.visualization.BarChart(document.getElementById('chart_div2'));
chart.draw(data2, options2);
}

draw(chart);
draw(chart2);
</script>
</head>

<body>
<!--Div that will hold the bar charts-->
<div id="chart_div"></div>
<div id="chart_div2"></div>
</body>


     
        <a class="teleport-widget-link" href="https://teleport.org/cities/aarhus/">Life quality score - Aarhus</a>
        <script async class="teleport-widget-script" data-url="https://teleport.org/cities/aarhus/widget/scores/?currency=USD"
        data-max-width="770" data-height="977" src="https://teleport.org/assets/firefly/widget-snippet.min.js"></script> -->
          

</html>

